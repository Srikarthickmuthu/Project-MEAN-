{"ast":null,"code":"import _asyncToGenerator from \"/home/asplap3262/Desktop/Project(MEAN)/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/user.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../navbar/navbar.component\";\nimport * as i6 from \"../../Services/Pipes/sum.pipe\";\nfunction CartComponent_div_1_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"label\");\n    i0.ɵɵtext(11, \"Quantity :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_20_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.decrement(product_r3, product_r3.productName));\n    });\n    i0.ɵɵelement(13, \"i\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"b\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_20_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.increment(product_r3, product_r3.productName));\n    });\n    i0.ɵɵelement(17, \"i\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"td\")(19, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_tr_20_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.delete(product_r3._id));\n    });\n    i0.ɵɵtext(20, \"Remove\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r3.productImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.productType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20B9 \", product_r3.productPrice, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", product_r3.quantity, \" \");\n  }\n}\nfunction CartComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"h2\");\n    i0.ɵɵtext(3, \"List of Products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"table\")(5, \"thead\")(6, \"tr\")(7, \"th\");\n    i0.ɵɵtext(8, \"Product Image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Product Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Product Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Product Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Remove\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tbody\");\n    i0.ɵɵtemplate(20, CartComponent_div_1_tr_20_Template, 21, 5, \"tr\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"tfoot\")(22, \"tr\")(23, \"th\", 2);\n    i0.ɵɵtext(24, \"Total price of the products :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\");\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"sum\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"td\", 3)(29, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_1_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.checkout());\n    });\n    i0.ɵɵtext(30, \"Checkout\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cart);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\\u20B9 \", i0.ɵɵpipeBind2(27, 2, ctx_r0.cart, \"total\"), \"\");\n  }\n}\nfunction CartComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 10)(2, \"button\", 11);\n    i0.ɵɵtext(3, \" Shop Now! \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(4, \"div\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class CartComponent {\n  constructor(userservice, toastr) {\n    this.userservice = userservice;\n    this.toastr = toastr;\n    this.cart = [];\n    this.product = [];\n    this.user = localStorage.getItem('Active-User');\n  }\n  ngOnInit() {\n    this.getCart();\n  }\n  getCart() {\n    this.userservice.getCart(this.user, \"Ordered\").subscribe(res => {\n      this.cart = res;\n      if (this.cart.length == 0) {\n        localStorage.removeItem('id');\n      }\n    }, err => {\n      this.toastr.error(`${err.status} Error ${err.name}`);\n    });\n    return this.cart;\n  }\n  delete(data) {\n    const confirm = window.confirm(\"Are you sure you want to remove this item?\");\n    if (confirm == true) {\n      this.userservice.delete(data).subscribe(() => {\n        this.getCart();\n        this.toastr.warning('Product removed ..!');\n      }, err => {\n        this.toastr.error(`${err.status} Error ${err.name}`);\n      });\n    }\n  }\n  increment(data, name) {\n    if (data.quantity >= 10) {\n      this.toastr.info('You can add upto 10 units only !');\n      data.quantity = 10;\n    } else if (data.quantity >= 1) {\n      data.quantity++;\n      data.total = data.productPrice * data.quantity;\n      this.cart.map(element => {\n        if (element.productName == name) {\n          return this.id = element._id;\n        }\n      });\n      this.userservice.updateDelivery(this.id, data).subscribe(() => {\n        this.getCart();\n      }, err => {\n        this.toastr.error(`${err.status} Error ${err.name}`);\n      });\n    }\n  }\n  decrement(data, name) {\n    if (data.quantity > 1) {\n      data.quantity--;\n      data.total = data.productPrice * data.quantity;\n      this.cart.map(element => {\n        if (element.productName == name) {\n          return this.id = element._id;\n        }\n      });\n      this.userservice.updateDelivery(this.id, data).subscribe(() => {\n        this.getCart();\n      }, err => {\n        this.toastr.error(`${err.status} Error ${err.name}`);\n      });\n    } else if (data.quantity = 1) {\n      this.delete(this.id);\n    }\n  }\n  checkout() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      for (const element of _this.cart) {\n        element.deliveryStatus = 'Out for delivery';\n        const id = element._id;\n        yield _this.userservice.updateDelivery(id, element).toPromise();\n      }\n      _this.getCart();\n    })();\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ToastrService));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"3\"], [\"colspan\", \"2\"], [\"id\", \"check\", 3, \"click\"], [3, \"src\"], [3, \"click\"], [1, \"fa-solid\", \"fa-minus\"], [1, \"fa-solid\", \"fa-plus\"], [\"id\", \"button\", 3, \"click\"], [1, \"card\"], [\"id\", \"button\", \"routerLink\", \"/home-path/view-home-path\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-navbar\");\n      i0.ɵɵtemplate(1, CartComponent_div_1_Template, 31, 5, \"div\", 0);\n      i0.ɵɵtemplate(2, CartComponent_div_2_Template, 5, 0, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.cart.length != 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.cart.length == 0);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.RouterLink, i5.NavbarComponent, i6.SumPipe],\n  styles: [\"table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n  margin-left: auto;\\n  margin-right: auto;\\n  text-align: center;\\n  border-bottom: 1px solid;\\n  border-collapse: collapse;\\n}\\nh2[_ngcontent-%COMP%] {\\n  font-size: 40px;\\n  color: rgb(232, 196, 196);\\n  text-align: center;\\n}\\ntr[_ngcontent-%COMP%]:nth-child(odd) {\\n  background-color: #eee;\\n}\\ntr[_ngcontent-%COMP%]:nth-child(even) {\\n  background-color: rgb(180, 171, 171);\\n}\\n\\ntd[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n  padding: 10px 39px;\\n  font-size: 20px;\\n}\\n\\nimg[_ngcontent-%COMP%] {\\n  width: 100px;\\n  height: 100px;\\n  border-radius: 80px;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  background-image: url('empthCart.png');\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n  padding: 200px;\\n  margin-left: auto;\\n  margin-right: auto;\\n  border: 1px solid black;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  border-radius: 30px;\\n  background-color: floralwhite;\\n}\\n\\n#button[_ngcontent-%COMP%] {\\n  border-radius: 20px;\\n  border: 1px solid #00d2ff;\\n  background-color: #3a47d5;\\n  color: #ffffff;\\n  font-size: 12px;\\n  font-weight: bold;\\n  padding: 12px 45px;\\n  letter-spacing: 1px;\\n  text-transform: uppercase;\\n  transition: transform 80ms ease-in;\\n  cursor: pointer;\\n}\\n\\n#button[_ngcontent-%COMP%]:hover {\\n  background-color: #92fe9d;\\n}\\n#place[_ngcontent-%COMP%]{\\n  background-color: #5795d7;\\n}\\n\\n#check[_ngcontent-%COMP%]{\\n  border-radius: 20px;\\n  border: 1px solid #00d2ff;\\n  background-color: rgb(29, 169, 29);\\n  color: #ffffff;\\n  font-size: 12px;\\n  font-weight: bold;\\n  padding: 12px 45px;\\n  letter-spacing: 1px;\\n  text-transform: uppercase;\\n  transition: transform 80ms ease-in;\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9jYXJ0L2NhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0VBR0UsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsd0JBQXdCO0VBQ3hCLHlCQUF5QjtBQUMzQjtBQUNBO0VBQ0UsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0Usb0NBQW9DO0FBQ3RDOztBQUVBOztFQUVFLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixtQkFBbUI7QUFDckI7QUFDQTs7OztHQUlHO0FBQ0g7RUFDRSxzQ0FBbUU7RUFDbkUsNEJBQTRCO0VBQzVCLHNCQUFzQjtFQUN0QixjQUFjO0VBQ2QsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQix1QkFBdUI7RUFDdkIsdUJBQWtCO0VBQWxCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLHlCQUF5QjtFQUN6Qix5QkFBeUI7RUFDekIsY0FBYztFQUNkLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsa0NBQWtDO0VBQ2xDLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7QUFDQTtFQUNFLHlCQUF5QjtBQUMzQjtBQUNBOzs7R0FHRztBQUNIO0VBQ0UsbUJBQW1CO0VBQ25CLHlCQUF5QjtFQUN6QixrQ0FBa0M7RUFDbEMsY0FBYztFQUNkLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsa0NBQWtDO0VBQ2xDLGVBQWU7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyJ0YWJsZSxcbnRkLFxudGgge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbn1cbmgyIHtcbiAgZm9udC1zaXplOiA0MHB4O1xuICBjb2xvcjogcmdiKDIzMiwgMTk2LCAxOTYpO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG50cjpudGgtY2hpbGQob2RkKSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG59XG50cjpudGgtY2hpbGQoZXZlbikge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTgwLCAxNzEsIDE3MSk7XG59XG5cbnRkLFxudGgge1xuICBwYWRkaW5nOiAxMHB4IDM5cHg7XG4gIGZvbnQtc2l6ZTogMjBweDtcbn1cblxuaW1nIHtcbiAgd2lkdGg6IDEwMHB4O1xuICBoZWlnaHQ6IDEwMHB4O1xuICBib3JkZXItcmFkaXVzOiA4MHB4O1xufVxuLyogYnV0dG9uIHtcbiAgcGFkZGluZzogNXB4IDIwcHg7XG4gIGZvbnQtc2l6ZTogbGFyZ2U7XG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbn0gKi9cbi5jYXJkIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uLy4uL2Fzc2V0cy9wcm9kdWN0LWltYWdlcy9lbXB0aENhcnQucG5nKTtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgcGFkZGluZzogMjAwcHg7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICB3aWR0aDogZml0LWNvbnRlbnQ7XG4gIGJvcmRlci1yYWRpdXM6IDMwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IGZsb3JhbHdoaXRlO1xufVxuXG4jYnV0dG9uIHtcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwZDJmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzNhNDdkNTtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHBhZGRpbmc6IDEycHggNDVweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDgwbXMgZWFzZS1pbjtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4jYnV0dG9uOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzkyZmU5ZDtcbn1cbiNwbGFjZXtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU3OTVkNztcbn1cbi8qIGJ7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiA0cHggMTBweDtcbn0gKi9cbiNjaGVja3tcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwZDJmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI5LCAxNjksIDI5KTtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHBhZGRpbmc6IDEycHggNDVweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDgwbXMgZWFzZS1pbjtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CartComponent","constructor","userservice","toastr","localStorage","getItem","ngOnInit","getCart","user","subscribe","res","cart","length","removeItem","err","error","status","name","delete","data","confirm","window","warning","increment","quantity","info","total","productPrice","map","element","productName","id","_id","updateDelivery","decrement","checkout","deliveryStatus","toPromise","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/asplap3262/Desktop/Project(MEAN)/front-end/src/app/home/cart/cart.component.html","/home/asplap3262/Desktop/Project(MEAN)/front-end/src/app/home/cart/cart.component.ts"],"sourcesContent":["<app-navbar ></app-navbar>\n\n<div *ngIf=\"cart.length != 0\">\n  <div>\n    <h2>List of Products</h2>\n    <table>\n      <thead>\n        <tr>\n          <th>Product Image</th>\n          <th>Product Name</th>\n          <th>Product Type</th>\n          <th>Product Price</th>\n          <!-- <th>Delivery Status</th> -->\n          <th>Quantity</th>\n          <th>Remove</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let product of cart\">\n          <td><img src=\"{{ product.productImage }}\" /></td>\n          <td>{{ product.productName }}</td>\n          <td>{{ product.productType }}</td>\n          <td>₹ {{ product.productPrice }}</td>\n          <!-- <td>{{ product.deliveryStatus }}</td> -->\n          <td>\n            <label>Quantity :</label>\n            <button (click)=\"decrement(product , product.productName)\"><i class=\"fa-solid fa-minus\"></i></button>\n            <b> {{product.quantity}} </b>\n            <button (click)=\"increment(product , product.productName)\"><i class=\"fa-solid fa-plus\"></i></button>\n          </td>\n          <td><button (click)=\"delete(product._id)\" id=\"button\">Remove</button></td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr>\n          <th colspan=\"3\">Total price of the products :</th>\n          <td>₹ {{ (cart | sum : \"total\") }}</td>\n          <td colspan=\"2\">\n            <button id=\"check\" (click)=\"checkout()\">Checkout</button>\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n</div>\n<div *ngIf=\"cart.length == 0\">\n  <div class=\"card\">\n    <button id=\"button\" routerLink=\"/home-path/view-home-path\">\n      Shop Now!\n    </button>\n  </div>\n  <div>\n    \n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { errorMessage } from 'src/app/Services/Guard/product';\nimport { UserService } from 'src/app/Services/user.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css'],\n})\nexport class CartComponent implements OnInit {\n  public cart: any = [];\n  public product: any = [];\n  public product1: any;\n  public uniqueCart: any;\n  public id: any;\n  user = localStorage.getItem('Active-User');\n  constructor(public userservice: UserService, public toastr: ToastrService) {}\n\n  ngOnInit() {\n    this.getCart();\n  }\n\n  getCart() {\n    this.userservice.getCart(this.user,\"Ordered\").subscribe(\n      (res: any) => {\n        this.cart=res\n        if (this.cart.length == 0) {\n          localStorage.removeItem('id');\n        }\n      },\n      (err: errorMessage) => {\n        this.toastr.error(`${err.status} Error ${err.name}`);\n      }\n    );\n    return this.cart;\n  }\n\n  delete(data: number) {\n    const confirm= window.confirm(\"Are you sure you want to remove this item?\")\n    if(confirm==true){\n      this.userservice.delete(data).subscribe(\n        () => {\n          this.getCart();\n          this.toastr.warning('Product removed ..!');\n        },\n        (err: errorMessage) => {\n          this.toastr.error(`${err.status} Error ${err.name}`);\n        }\n      );\n    }\n  }\n  increment(data: any, name: string) {\n    if (data.quantity >= 10) {\n      this.toastr.info('You can add upto 10 units only !');\n      data.quantity = 10;\n    } else if (data.quantity >= 1) {\n      data.quantity++;\n      data.total = data.productPrice * data.quantity;\n      this.cart.map((element: any) => {\n        if (element.productName == name) {\n          return (this.id = element._id);\n        }\n      });\n      this.userservice.updateDelivery(this.id, data).subscribe(\n        () => {\n          this.getCart();\n        },\n        (err: errorMessage) => {\n          this.toastr.error(`${err.status} Error ${err.name}`);\n        }\n      );\n    }\n  }\n  decrement(data: any, name: string) {\n    if (data.quantity > 1) {\n      data.quantity--;\n      data.total = data.productPrice * data.quantity;\n      this.cart.map((element: any) => {\n        if (element.productName == name) {\n          return (this.id = element._id);\n        }\n      });\n      this.userservice.updateDelivery(this.id, data).subscribe(\n        () => {\n          this.getCart();\n        },\n        (err: errorMessage) => {\n          this.toastr.error(`${err.status} Error ${err.name}`);\n        }\n      );\n    } else if ((data.quantity = 1)) {\n      this.delete(this.id);\n    }\n  }\n async checkout() {\n  for (const element of this.cart) {\n    element.deliveryStatus = 'Out for delivery';\n    const id = element._id;\n    await this.userservice.updateDelivery(id, element).toPromise();\n  }\n  this.getCart();\n}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}